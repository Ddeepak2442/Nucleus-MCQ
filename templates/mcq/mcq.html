{% extends 'basemain.html' %} {% load static %} {% block content %}
    <div class="main">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="col-12 col-md-10">
            <div class="d-flex justify-content-between shadow mt-3">
              <button class="hovered p-2 mb-0 m-3" onclick="location.href='{% url 'mcq_quiz' topic_slug=topic.slug question_num=question_num|add:'-1' %}'">
                <i class="bi bi-arrow-left-circle-fill" style="color:#0d6efd; width:26px; height:26px; font-weight:600;"></i>
              </button>
              <p class="pt-3">Question  {{ question_num }} of {{ total_questions }}</p>
              <button class="hovered p-2 mb-0 m-3" onclick="location.href='{% url 'mcq_quiz' topic_slug=topic.slug question_num=question_num|add:'1' %}'">
                <i class="bi bi-arrow-right-circle-fill" style="color:#0d6efd; width:26px; height:26px; font-weight:600;"></i>
              </button>
              
            </div>
            <form method="post" action="{% url 'mcq_quiz' topic_slug=topic.slug question_num=question_num %}">
              {% csrf_token %}
                <p class="pt-3" >{{ current_question }} </p>
                <div class="card mt-4">
                {% if feedback_color %}
                <div class="options mt-4">
                  <table class="table">
                     <tbody>
                        {% for option in opt_values %}
                         <tr>
                            <td><p> {{ option }} </p></td>
                         </tr>
                       {% endfor %}
                     </tbody>
                  </table>
                </div>
              {% else %}
              <div>
                {% for option in opt_values %}
                <input type="radio" id="option{{ forloop.counter }}" class="m-3 mt-0 mb-0" name="selected_option" value="{{ option }}" required>
                <label for="option{{ forloop.counter }}">{{ option }}</label><br>
                {% endfor %}
              </div>
             {% endif %}
              <input type="hidden" name="question_id" value="{{ current_question.id }}">

             <div class="d-flex justify-content-between">
              <input  type="submit" value="Submit" class="btn btn-primary mt-4">
          </form>
              <div class="popover mt-4">
                <button class="popover-btn btn  hovered" onclick="togglePopover()"><i class="bi bi-bookmark"></i> Bookmark</button>
                <div id="popoverContent" class="popover-content" style="display: none;">
                    <!-- Popover content -->
                    <form id="bookmarkForm" method="post" action="{% url 'mcq_quiz' topic_slug=topic.slug question_num=question_num %}">
                        {% csrf_token %}
                        <input type="hidden" name="question_id" value="{{ current_question.id }}">
                        <input type="hidden" name="bookmark_category" id="bookmark_category" value="">
                        <ul>
                            <li><button type="submit" name="bookmark_category" value="important">Important</button></li>
                            <li><button type="submit" name="bookmark_category" value="star">Star</button></li>
                            <li><button type="submit" name="bookmark_category" value="doubt">Doubt</button></li>
                        </ul>
                    </form>
                </div>
            </div>
            
            
            </div>
            
            </div>
          
          {% if feedback_color == 'green' %}
          <div class="accordion mt-4" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseOne">
                        Explanation
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" style="background-color: azure;"
                     aria-labelledby="panelsStayOpen-headingOne">
                    <div class="accordion-body">
                        <strong>This is the Correct Answer.</strong> {{ current_question.explanation }}
                    </div>
                </div>
            </div>
        </div>

      {% elif feedback_color == 'red' %}
          <div class="accordion mt-4" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseOne">
                        Explanation
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" style="background-color: azure;"
                     aria-labelledby="panelsStayOpen-headingOne">
                    <div class="accordion-body">
                        <strong>Incorrect! <br> Correct answer:{{ correct_ans }}. </strong> <br> Explanation: {{ current_question.explanation }}
                    </div>
                </div>
            </div>
        </div>

      {% endif %}
            
          </div>
        </div>
        
      </div>

      <div class="conatiner">
        <div class="row d-flex justify-content-center">
          <div class=" col-12 col-md-9 card mt-5 mb-5">
          <div class="navbar d-flex justify-content-around">
            <button class="nav-btn" data-target="overview">Overview</button>
            <button class="nav-btn" data-target="notes">Notes</button> 
            <button class="nav-btn" data-target="Discussions">Discussions</button>
            <button class="nav-btn" data-target="Resources">Resources</button>
            <button class="nav-btn" data-target="learning-tools">Learning Tools</button>
            </div>
          <hr style="margin-top:0px;"/>


          
            <div id="overview" class="content  p-5">
              <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                      Topic  : {{ topic.topic_name}}
                    </button>
                  </h2>
                  <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body">
                      <div class="conatiner">
                        <div class="row d-flex">
                          <div class="col-12">
                          <div>
                            <div class="text-dark p-2">
                              {% for sub_topic in sub_topics %}
                              <div class="hovering">
                                  <div class="d-flex">
                                      <label for="{{ sub_topic.sub_topic_name }}" class="p-2">{{ sub_topic.sub_topic_name }}</label>
                                  </div>
                                  <p class="p-3 pt-0 pb-0"><i class="bi bi-clipboard2-check"></i> {{ sub_topic.question_count }} MCQS</p>
                              </div>
                              {% endfor %}
                          </div>
                          
                              
                            </div>
              
                    </div>
                    </div>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="notes" class="content text-center p-5">
              <h2>This Is Notes</h2>
            </div>          
            
          
            <div id="Discussions" class="content text-center p-5">
              <div class="container mt-4">
                <!-- Topic Header -->
                <div class="topic-header">
                  <h1>Medicine Discussions</h1>
                  <p>Join the conversation about the latest trends and developments in medicine!</p>
                </div>
                <!-- Comments Section -->
                <div class="comments-section">
                  <!-- Comment 1 -->
                  <div class="comment">
                    <p class="user">John Doe</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vehicula aliquam eros, eu vehicula lorem ultrices quis. Nullam vel nulla nec ante sodales mollis nec non neque.</p>
                    <p class="timestamp">Posted: April 17, 2024</p>
                  </div>
                  <!-- Comment 2 -->
                  <div class="comment">
                    <p class="user">Jane Smith</p>
                    <p>Suspendisse potenti. Nunc lacinia hendrerit turpis, nec lobortis nunc finibus nec. Sed ac justo at nisi auctor accumsan.</p>
                    <p class="timestamp">Posted: April 16, 2024</p>
                  </div>
                  <!-- Add your comment form -->
                  <form class="mt-4">
                    <div class="form-group">
                      <label for="comment">Join the discussion:</label>
                      <textarea class="form-control" id="comment" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Post Comment</button>
                  </form>
                </div>
              </div>
            </div>
          
            <div id="Resources" class="content text-center p-5">
              <h2>This Is Resources</h2>
            </div>
          
            <div id="learning-tools" class="content text-center p-5">
              <h2>This Is Learning Tools</h2>
            </div>
          
            
          </div>
        </div>
      </div>
    </div>
  </div>
   
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
  
  <script>
 
    const radioButtons = document.querySelectorAll('input[type="radio"]');
    radioButtons.forEach(button => {
      button.addEventListener('click', function() {
        radioButtons.forEach(otherButton => {
          if (otherButton !== button) {
            otherButton.checked = false;
          }
        });
      });
    });
  </script>
    <script>


    document.addEventListener("DOMContentLoaded", function() {
  const dropdownBtns = document.querySelectorAll('.dropdown-btn');

  dropdownBtns.forEach(function(btn) {
    btn.addEventListener('click', function() {
      const dropdownContent = this.nextElementSibling;
      dropdownContent.classList.toggle('show');
    });
  });
});

document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('overview').classList.add('active');

  document.querySelectorAll('.nav-btn').forEach(button => {
    button.addEventListener('click', function() {
      const target = this.getAttribute('data-target');
      document.querySelectorAll('.content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(target).classList.add('active');
    });
  });
});

document.querySelectorAll('.nav-btn').forEach(button => {
      button.addEventListener('click', function() {
        const target = this.getAttribute('data-target');
        document.querySelectorAll('.content').forEach(content => {
          content.classList.remove('active');
        });
        document.getElementById(target).classList.add('active');
      });
    });

</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  var popoverBtn = document.querySelector('.popover-btn');
  var popoverContent = document.querySelector('.popover-content');

  popoverBtn.addEventListener('click', function() {
    popoverContent.style.display = popoverContent.style.display === 'block' ? 'none' : 'block';
  });

  var popoverOptions = document.querySelectorAll('.popover-content ul li');
  popoverOptions.forEach(function(option) {
    option.addEventListener('click', function() {
      popoverContent.style.display = 'none';
    });
  });
});

</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Your JavaScript code here
    function togglePopover() {
        var popoverContent = document.getElementById("popoverContent");
        if (popoverContent.style.display === "none") {
            popoverContent.style.display = "block";
        } else {
            popoverContent.style.display = "none";
        }
    }

    function setCategory(category) {
        document.getElementById("bookmark_category").value = category;
        document.getElementById("bookmarkForm").submit();
    }
});

</script>
      
{% endblock %}
